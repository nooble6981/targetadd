jQuery(function(e){function t(){var e=jQuery(window).scrollTop(),t="no";jQuery(".panel-grid").each(function(){var i="#"+jQuery(this).attr("id"),n=jQuery(this).offset().top-2,o=jQuery(this).outerHeight(),a=n-g,s=n+o-g;return e>=a&&e<=s?(jQuery("#site-navigation .current").removeClass("current"),jQuery('#site-navigation a[href$="'+i+'"]').parent("li").addClass("current"),!1):void("no"==t&&jQuery("#site-navigation .current").removeClass("current"))})}e.fn.isVisible=function(){var e=this[0].getBoundingClientRect();return e.bottom>=0&&e.right>=0&&e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth)},e(window).load(function(){e(".entry-thumbnail").each(function(){img=e(this).find("img"),img_width=img.width(),img_height=img.height(),e(this).css({maxWidth:img_width,maxHeight:img_height})})});var i={x:0,y:0};e(document).mousemove(function(e){i={x:e.pageX,y:e.pageY}}),e.fn.burstAnimation=function(t){var n=e.extend({event:"click",container:"parent"},t);return e(this).each(function(){var t=e(this),o="parent"===n.container?t.parent():t.closest(n.container),a=e('<div class="burst-animation-overlay"></div>'),s=e('<div class="burst-circle"></div>').appendTo(a);t.on(n.event,function(){a.appendTo(o),s.css({top:i.y-o.offset().top,left:i.x-o.offset().left,opacity:.1,scale:1}).transition({opacity:0,scale:o.width()},500,"ease",function(){a.detach()})})})},"undefined"!=typeof e.fn.fitVids&&e(".entry-content, .entry-content .panel, .woocommerce #main").fitVids({ignore:".tableauViz"}),e(document).ready(function(){e.isFunction(e.fn.flexslider)&&(e(".featured-posts-slider").flexslider({animation:"slide",controlNav:!1,customDirectionNav:e(".flex-direction-nav a")}),e(".gallery-format-slider").flexslider({animation:"slide",controlNav:!1,customDirectionNav:e(".flex-direction-nav a")}))});var n=function(){var t=window.pageYOffset||document.documentElement.scrollTop;t>e("#masthead").outerHeight()?e("#scroll-to-top").hasClass("show")||e("#scroll-to-top").css("pointer-events","auto").addClass("show"):e("#scroll-to-top").hasClass("show")&&e("#scroll-to-top").css("pointer-events","none").removeClass("show")};if(n(),e(window).scroll(n),e("#scroll-to-top").click(function(){e("html, body").animate({scrollTop:0})}),e("#masthead").hasClass("sticky")){var o=!1,a=e("#page").offset().top,s=e("#masthead"),r=function(){o===!1&&(o=e('<div class="masthead-sentinel"></div>').insertAfter(s),o.css("height",s.outerHeight())),s.css("position","fixed")};r(),e(window).resize(r).scroll(r);var c=function(){e(window).scrollTop()>0?e(s).addClass("stuck"):e(s).removeClass("stuck")};c(),e(window).scroll(c);var l={top:parseInt(s.css("padding-top")),bottom:parseInt(s.css("padding-bottom"))};if(s.data("scale-logo")){var d=function(){var e=window.pageYOffset||document.documentElement.scrollTop;e-=a;var t=s.find(".site-branding img"),i=s.find(".site-branding > *");t.removeAttr("style");var n=t.width(),o=t.height();if(e>0){var r=.775+Math.max(0,48-e)/48*(1-.775);t.length?t.css({width:n*r,height:o*r,"max-width":"none"}):i.css("transform","scale("+r+")"),s.css({"padding-top":l.top*r,"padding-bottom":l.bottom*r}).addClass("stuck")}else t.length||i.css("transform","scale(1)"),s.css({"padding-top":l.top,"padding-bottom":l.bottom}).removeClass("stuck")};d(),e(window).scroll(d).resize(d)}}e(".search-field").burstAnimation({event:"focus",container:".search-form"});var h=e("#header-search");if(e("#masthead .search-icon").click(function(){h.fadeIn("fast"),h.find("form").css("margin-top",-h.find("form").innerHeight()/2),h.find('input[type="search"]').focus().select(),h.find("#close-search").addClass("animate-in")}),h.find("#close-search").click(function(){h.fadeOut(350),e(this).removeClass("animate-in")}),e(window).scroll(function(){h.is(":visible")&&h.find("form").css("margin-top",-h.find("form").outerHeight()/2)}),e(document).keyup(function(t){27==t.keyCode&&e("#close-search.animate-in").trigger("click")}),e("body.no-js").removeClass("no-js"),e("body").hasClass("css3-animations")){e(".search-field").burstAnimation({event:"focus",container:".search-form"});var u=function(){e(".main-navigation ul ul").each(function(){var t=e(this),i=Math.max.apply(Math,t.find("> li > a").map(function(){return e(this).width()}).get());t.find("> li > a").width(i)})};u(),e(window).resize(u),e(".menu-item").children("a").focus(function(){e(this).parents("ul, li").addClass("focus")}),e(".menu-item").children("a").click(function(){e(this).parents("ul, li").removeClass("focus")}),e(".menu-item").children("a").focusout(function(){e(this).parents("ul, li").removeClass("focus")}),e(".main-navigation ul ul li a").burstAnimation({event:"click",container:"parent"})}jQuery(document).ready(function(e){window.location.hash||(e('#site-navigation a[href="'+window.location.href+'"]').parent("li").addClass("current-menu-item"),e(window).scroll(function(){e("#site-navigation ul li").hasClass("current")&&e("#site-navigation li").removeClass("current-menu-item")}))});var m=e("#wpadminbar").outerHeight(),f=e("body").hasClass("admin-bar"),p=e("header").hasClass("sticky");if(p&&f&&jQuery(window).width()>600)var g=m+e("header").outerHeight()-2;else if(p)var g=e("header").outerHeight()-2;else var g=0;e.fn.polestarSmoothScroll=function(){e(this).click(function(e){var t=this.hash,i=t.substring(1),n=this;if(jQuery(".panel-grid [id*="+i+"]").length>0?(jQuery("#site-navigation .current").removeClass("current"),jQuery(n).parent("li").addClass("current")):jQuery("#site-navigation .current").removeClass("current"),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var o=jQuery(this.hash);if(o=o.length?o:jQuery("[name="+this.hash.slice(1)+"]"),o.length)return jQuery("html, body").animate({scrollTop:o.offset().top-g},1200),!1}})},jQuery(window).load(function(){e('#site-navigation a[href*="#"]:not([href="#"]), .comments-link a[href*="#"]:not([href="#"]), .puro-scroll[href*="#"]:not([href="#"])').polestarSmoothScroll()}),jQuery(window).load(function(){if(location.pathname.replace(/^\//,"")==window.location.pathname.replace(/^\//,"")&&location.hostname==window.location.hostname){var t=jQuery(window.location.hash);if(t.length)return e(document).scrollTop(0),jQuery("html, body").animate({scrollTop:t.offset().top-g},1200),!1}}),jQuery(window).on("scroll",t);var v=!1;e("#mobile-menu-button").click(function(t){t.preventDefault();var i=e(this);if(i.toggleClass("to-close"),v===!1){v=e("<div></div>").append(e(".main-navigation ul").first().clone()).attr("id","mobile-navigation").appendTo("#masthead").hide(),e("#header-search form").length&&v.append(e("#header-search form").clone()),e(".main-navigation .shopping-cart").length&&v.append(e(".main-navigation .shopping-cart .shopping-cart-link").clone()),v.find("#primary-menu").show().css("opacity",1),v.find(".menu-item-has-children > a, .page_item_has_children > a").after('<button class="dropdown-toggle" aria-expanded="false"><i class="icon-chevron-down" aria-hidden="true"></i></button>'),v.find(".dropdown-toggle").click(function(t){t.preventDefault(),e(this).toggleClass("toggle-open").next(".children, .sub-menu").slideToggle("fast")});var n=function(){if(e("#masthead").hasClass("sticky")){var t="fixed"===e("#wpadminbar").css("position")?e("#wpadminbar").outerHeight():0,i=e(window).height()-e("#masthead").innerHeight()-t;e("#mobile-navigation").outerHeight()>i?e("#mobile-navigation").css({"max-height":i,"overflow-y":"scroll","-webkit-overflow-scrolling":"touch"}):e("#mobile-navigation").css("max-height",i)}};n(),e(window).resize(n)}v.slideToggle("fast"),e("#mobile-navigation a").click(function(e){v.is(" :visible")&&v.slideUp("fast"),i.removeClass("to-close")})})});